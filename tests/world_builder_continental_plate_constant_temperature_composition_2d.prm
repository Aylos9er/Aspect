# A test of the basis framework of the world builder. It creates an 
# initial condition of two cold 'continental plates' in an adiabatic 
# 3d box of 2000 by 2000 by 500 km.

# Set where the world builder file is
set World builder file = $ASPECT_SOURCE_DIR/data/world_builder/tests/world_builder_constant_temperature_composition/three_constant_continents.wb

set Dimension                              = 2

set Nonlinear solver scheme = Newton Stokes
set Max nonlinear iterations = 0
set Use years in output instead of seconds = false
set End time                               = 0

set Pressure normalization                 = surface
set Surface pressure                       = 0


subsection Geometry model
  set Model name = box

  subsection Box
    set X extent = 2000e3
    set Y extent = 500e3
    set X repetitions = 8
    set Y repetitions = 2
  end
end


subsection Initial temperature model
  set Model name = world builder
end

subsection Initial composition model
  set Model name = world builder
end

subsection Compositional fields
  set Number of fields = 5
end

subsection Boundary temperature model
  set List of model names = initial temperature
end


subsection Boundary velocity model
  set Tangential velocity boundary indicators = left, right, bottom, top
end


subsection Gravity model
  set Model name = vertical

  subsection Vertical
    set Magnitude = 10 
  end
end


subsection Material model
  set Model name = simple 

  subsection Simple model
    set Reference density             = 1
    set Reference specific heat       = 1
    set Reference temperature         = 0
    set Thermal conductivity          = 1
    set Thermal expansion coefficient = 1e-10
    set Viscosity                     = 1
  end
end


subsection Mesh refinement
  set Initial global refinement                = 2
  set Initial adaptive refinement              = 0 
end


subsection Postprocess
  set List of postprocessors = velocity statistics, temperature statistics, visualization

  subsection Visualization
    set Output format = gnuplot
  end
end
